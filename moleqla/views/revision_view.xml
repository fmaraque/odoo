<openerp>
	<data>

		<record model="ir.ui.view" id="view_revision_form">
			<field name="name">Revision</field>
			<field name="model">revision</field>
			<field name="arch" type="xml">
				<form string="Revision" version="8.0">
					<sheet>
						<header>				
								<button name="aceptar" string="Mandar a maquetar" class="oe_read_only" states="en_revision" colspan="1" type="object"/>
								<button name="rechazar" string="Rechazar" class="oe_read_only" states="en_revision" colspan="1" type="object" />
								<field name='state' widget='statusbar'/>	
						</header>

						<notebook >
							<page string="Artículo" attrs="{'readonly':'1'}">
								<group col="4">
									<field name="articulo_nombre" />
									<field name="articulo_seccion" />
									<field name="articulo_estado" />
								</group>
								<group col="2">	
									<field name="articulo_descripcion" />
								</group>
								<group col="4">	
									<field name="articulo_tipoArticulo" />
									<field name="articulo_tipoAutor" />
									<field name="articulo_archivo" filename="filenameArt" />
									<field name="filenameArt" invisible="1"/>
									<field name="articulo_archivoDiff" filename="filenameDiff" attrs="{'invisible':[('articulo_archivoDiff','=',False)]}"/>
									<field name="filenameDiff" invisible="1"/>
								</group>
							</page>
						
							<page string="Revisión">
								<group col="2">
									<field name="comentarios" attrs="{'readonly':['|','|',('state','=','enviado_a_maquetacion')]}"/>
									<field name="observaciones" filename="filenameObv" attrs="{'readonly':['|','|',('state','=','enviado_a_maquetacion')]}"></field>
									<field name="filenameObv" invisible="1"/>
									<field name="versiones_anteriores" attrs="{'readonly':'1'}"></field>
								</group>								
							</page>
						</notebook>
					</sheet>
				</form>
			</field>
		</record>

		<record model="ir.ui.view" id="view_revision_tree">
			<field name="name">Revisión</field>
			<field name="model">revision</field>
			<field name="arch" type="xml">
				<tree string="Revisiones">
					<field name="articulo_id"></field>
					<field name="state"></field>
					<field name="seccion_id" />
					<field name="articulo_estado" string="Estado del artículo"/>
					<field name="articulo_a_publicar" string="¿Se publica?" />
				</tree>
			</field>
		</record>

		<!-- Action -->
		<record id="act_revision" model="ir.actions.act_window">
			<field name="name">Revisiones</field>
			<field name="res_model">revision</field>
			<field name="view_id" ref="view_revision_tree" />
			<field name="view_type">form</field>
			<field name="view_mode">tree,form</field>
		</record>

		<!-- Menu -->
		<menuitem name="Revisiones" id="revisiones_submenu" parent="moleqla_submenu_jefe"
			groups="moleqla.group_editor" sequence="110" action="act_revision"/>
		
	</data>
</openerp>